<!DOCTYPE html>
<!-- /*
 * This file is part of the Companion project
 * Copyright (c) 2018 Bitfocus AS
 * Authors: William Viker <william@bitfocus.io>, Håkon Nessjøen <haakon@bitfocus.io>
 *
 * This program is free software.
 * You should have received a copy of the MIT licence as well as the Bitfocus
 * Individual Contributor License Agreement for companion along with
 * this program.
 *
 * You can be released from the requirements of the license by purchasing
 * a commercial license. Buying such a license is mandatory as soon as you
 * develop commercial activities involving the Companion software without
 * disclosing the source code of your own applications.
 *
 */ -->
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
		<meta name="language" content="en">
		<link rel="shortcut icon" href="/img/brand/icon.png">

		<meta http-equiv="Content-Language" content="en">
		<title>Companion Admin</title>
		<meta name="google" content="notranslate">
		<link href="js/flag-icon-css/css/flag-icon.min.css" rel="stylesheet">
		<link href="js/font-awesome/css/font-awesome.min.css" rel="stylesheet">
		<link href="css/style.css" rel="stylesheet">
		<link href="vendors/pace-progress/css/pace.min.css" rel="stylesheet">
		<link href="/fa/css/all.css" rel="stylesheet">
		<link href="index.css" rel="stylesheet">
		<link rel='stylesheet' href='css/spectrum.css' />
	</head>

	<body class="app header-fixed sidebar-fixed aside-menu-fixed sidebar-lg-show">

		<div id="error-container">
			<div class="row justify-content-center">
				<div class="col-md-6">
					<div class="clearfix">
						<h4 class="pt-3">Houston, we have a problem!</h4>
						<p class="text-muted">It seems that we have lost connection to the companion app.</p>

						<p class="text-muted">
							<li class="text-muted">Check that the application is still running</li>
							<li class="text-muted">If you're using the web gui over network - check your connection</li>
						</p>
					</div>
				</div>
			</div>
		</div>

		<header class="app-header navbar">
			<button class="navbar-toggler sidebar-toggler d-lg-none mr-auto" type="button" data-toggle="sidebar-show">
				<span class="navbar-toggler-icon"></span>
			</button>

			<a class="navbar-brand" href="#">
				<img class="navbar-brand-full" src="/img/brand/logo.png" width="140" alt="Bitfocus Logo">
				<img class="navbar-brand-minimized" src="/img/brand/icon.png" width="30" height="30" alt="Bitfocus Logo">
			</a>

			<button class="navbar-toggler sidebar-toggler d-md-down-none" type="button" data-toggle="sidebar-lg-show">
				<span class="navbar-toggler-icon"></span>
			</button>

			<ul class="nav navbar-nav d-md-down-none">

				<!-- <li class="nav-item px-3">
					<a class="nav-link" href="#">Status</a>
				</li>-->

				<li class="nav-item px-3">
					<a class="nav-link" target="_new" id='versiontext' href="https://bitfocus.io/companion/">version</a>
				</li>
				<li class="nav-item px-3">
					<a class="nav-link" target="_new" id='newversiontext' href="https://bitfocus.io/companion/"></a>
				</li>

			</ul>

			<ul class="nav navbar-nav ml-auto">
				<!--
				<li class="nav-item d-md-down-none">
					<a class="nav-link" href="#">
						<i class="icon-bell"></i>
						<span class="badge badge-pill badge-danger">5</span>
					</a>
				</li>

				<li class="nav-item d-md-down-none">
					<a class="nav-link" href="#">
						<i class="icon-list"></i>
					</a>
				</li>

				<li class="nav-item d-md-down-none">
					<a class="nav-link" href="#">
						<i class="icon-location-pin"></i>
					</a>
				</li>
				-->
			</ul>
			<button class="navbar-toggler aside-menu-toggler d-md-down-none" type="button" data-toggle="aside-menu-lg-show">
				<span class="navbar-toggler-icon"></span>
			</button>
			<button class="navbar-toggler aside-menu-toggler d-lg-none" type="button" data-toggle="aside-menu-show">
				<span class="navbar-toggler-icon"></span>
			</button>
		</header>

		<div class="app-body">
			<div class="sidebar">
				<nav class="sidebar-nav">
					<ul class="nav">

						<li class="nav-item">
							<a class="nav-link" target="_new" href="/tablet.html">
								<i class="nav-icon fa fa-gamepad"></i> Web buttons
								<!-- <span class="badge badge-primary">NEW</span> -->
							</a>
						</li>

						<li class="nav-item">
							<a class="nav-link" target="_new" href="/emulator.html">
								<i class="nav-icon fa fa-gamepad"></i> Elgato Emulator
								<!-- <span class="badge badge-primary">NEW</span> -->
							</a>
						</li>

						<li class="nav-item">
							<a class="nav-link" target="_new" href="https://github.com/bitfocus/companion/issues">
								<i class="nav-icon fa fa-bug"></i> Report bugs
								<!-- <span class="badge badge-primary">NEW</span> -->
							</a>
						</li>

						<li class="nav-item">
							<a class="nav-link" target="_new" href="https://www.facebook.com/groups/2047850215433318/">
								<i class="nav-icon fa fa-users"></i> Facebook Group
								<!-- <span class="badge badge-primary">NEW</span> -->
							</a>
						</li>

						<li class="nav-item">
							<a class="nav-link" target="_new" href="https://bit.ly/2IJ1jT4">
								<i class="nav-icon fa fa-comments"></i> Slack group
								<!-- <span class="badge badge-primary">NEW</span> -->
							</a>
						</li>

					</ul>
				</nav>
				<button class="sidebar-minimizer brand-minimizer" type="button"></button>
			</div>
			<main class="main" style="padding-top:26px;">
				<!-- Breadcrumb-->
				<!--
				<ol class="breadcrumb">

					<li class="breadcrumb-item">Companion</li>
					<li class="breadcrumb-item active">Web GUI</li>

					<li class="breadcrumb-menu d-md-down-none">
						<div class="btn-group" role="group" aria-label="Button group">
							<a class="btn" href="#">
								<i class="icon-speech"></i>
							</a>
							<a class="btn" href="./">
								<i class="icon-graph"></i>  Dashboard</a>
							<a class="btn" href="#">
								<i class="icon-settings"></i>  Settings</a>
						</div>
					</li>

				</ol> -->
				<div class="container-fluid">
					<div class="animated fadeIn">

						<div class="row">
							<!--/.col-->
							<div class="col-lg-6 col-sm-12 col-xs-12">
								<ul class="nav nav-tabs" role="tablist">


									<li class="nav-item">
										<a class="nav-link active" data-toggle="tab" href="#instances" role="tab" aria-controls="instances">
											<i class="fa fa-plug"></i> Instances
											<!-- <span class="badge badge-pill badge-success">OK</span> -->
										</a>
									</li>

									<li id="instanceConfigTab" class="nav-item">
										<a class="nav-link" data-toggle="tab" href="#instanceConfig" role="tab" aria-controls="instanceConfig">
											<i class="fa fa-cog"></i> Config</a>
									</li>


									<li class="nav-item">
										<a class="nav-link" data-toggle="tab" href="#elgatobuttons" id='elgbuttons' role="tab" aria-controls="home">
											<i class="fa fa-calendar-alt"></i> Buttons
										</a>
									</li>

									<li class="nav-item" id="editbankli">
										<a class="nav-link" data-toggle="tab" href="#editbank" role="tab" aria-controls="profile">
											<i class="icon-calculator"></i> Edit button <span id='editbankid'>?</span>
										</a>
									</li>

<!--									<li class="nav-item">
										<a class="nav-link" data-toggle="tab" href="#actions" role="tab" aria-controls="actions">
											<i class="icon-calculator"></i> Actions</a>
									</li> -->

									<li class="nav-item">
										<a class="nav-link" data-toggle="tab" href="#devices" role="tab" aria-controls="devices">
											<i class="fa fa-gamepad"></i> Surfaces</a>
									</li>

									<li class="nav-item">
										<a class="nav-link" data-toggle="tab" href="#userconfig" role="tab" aria-controls="userconfig">
											<i class="fa fa-user-ninja"></i> Settings</a>
									</li>

								</ul>

								<div class="tab-content padbottom">
									<div class="tab-pane active" id="instances" role="tabpanel">

										<h4>Connections / Instances</h4>
										<p>Instances are the connections companion makes to other devices and software in order to control them.</p>

										<table class="table table-responsive-sm">
											<thead>
												<tr>
													<th>Module</th>
													<th>Label</th>
													<th>Status</th>
													<th>Actions</th>
												</tr>
											</thead>
											<tbody id='instanceList'>
											</tbody>
										</table>

										<div class="dropdown">
											<select id="addInstance">
											</select>
										</div>
									 <p></p>

									</div>

									<div class="tab-pane" id="actions" role="tabpanel">
										<table class="table table-responsive-sm">
											<thead>
												<tr>
													<th>Instance</th>
													<th>Action</th>
												</tr>
											</thead>
											<tbody id='actionsList'>
											</tbody>
										</table>
										<table class="table table-responsive-sm">
											<thead>
												<tr>
													<th>Instance</th>
													<th>Action</th>
												</tr>
											</thead>
											<tbody id='releaseActionsList'>
											</tbody>
										</table>
									</div>

									<div class="tab-pane" id="variables" role="tabpanel">
									</div>

									<div class="tab-pane" id="instanceConfig" role="tabpanel">
										<h4></h4>
										<div id='instanceConfigFields' class="row"></div>
										<hr>
										<div id='instanceConfigVariables' class="row col-lg-12">
											<h4>List of dynamic variables</h4>
											<table class="table table-responsive-sm">
												<thead>
													<tr>
														<th>Variable</th>
														<th>Description</th>
														<th>Current value</th>
													</tr>
												</thead>
												<tbody id="instanceConfigVariableList"></tbody>
											</table>
										</div>

									</div>

									<div class="tab-pane" id="devices" role="tabpanel">
										<h4>Connected devices</h4>
										<p>This is the surfaces currently connected to companion. If your streamdeck is missing from this list, you
										might need to close the Elgato Streamdeck application and click the Rescan button below.</p><p><i>Rescanning blocks all operations while the scan is ongoing. <b>Use with care!</b></i></p>

										<table class="table table-responsive-sm">
											<thead>
												<tr>
													<th>ID</th>
													<th>Type</th>
													<th>&nbsp;</th>
												</tr>
											</thead>
											<tbody id='deviceInstanceList'>
											</tbody>
										</table>

										<button class="btn btn-warning" data-loading-text="<i class='fa fa-sync fa-spin '></i> Checking for new devices..." id="refreshUSB"><i class='fa fa-sync'></i> Rescan USB</button>
									</div>


									<div class="tab-pane" id="elgatobuttons" role="tabpanel">
										<h4>Button layout</h4>
										<p>The squares below represents each button on your streamdeck. Click on them to set up how you want them to look, and what they should do when you clock on them. You can navigate between pages using the blue arrow buttons.</p>

										<div class="row" id='pagenav'>
										</div>
										<div class="row" id='pagebank'>
										</div>

										<div class="row" id='functionarea' style="padding-top:15px;">
											<div id="functionkeys" class='col-sm-12'>
												<button class="btn btn-primary function-button buttonbottompad" data-function='copy' id='state_copy'><i class="fa fa-copy"></i> Copy</button>
												<button class="btn btn-primary function-button buttonbottompad" data-function='move' id='state_move'><i class="fa fa-arrows-alt"></i> Move</button>
												<button class="btn btn-primary function-button buttonbottompad" data-function='delete' id='state_delete'><i class="fa fa-trash"></i> Delete</button>
												<button class="btn btn-danger buttonbottompad" id='state_abort'>Cancel</button>
												<button class="btn btn-disabled buttonbottompad" id='state_hint'></button>
												<span id='state_hide'>
													<a id="export_page_link" href="/int/page_export/1" class="btn btn-success buttonbottompad"><i class="fa fa-file-export"></i> Export page</a>
													<button type="button" id="erase_page_link" class="btn btn-danger buttonbottompad"><i class="fa fa-eraser"></i> Erase page</button>
												</span>
											</div>
										</div>

										<p></p>
										<b>Hint:</b> Hold shift down to test buttons from the GUI<br>

									</div>
									<div class="tab-pane" id="editbank" role="tabpanel">

										<div id="bank_preview" class="pull-right">
											<canvas width=72 height=72></canvas>
										</div>

										<div class="dropdown">
											<button class="btn btn-success dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
												Set button style
											</button>
											<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
												<a class="dropdown-item change_style" data-style="none">None</a>
												<a class="dropdown-item change_style" data-style="text">Text</a>
												<a class="dropdown-item change_style" data-style="png">PNG Image</a>
											</div>
											<button class="btn btn-danger" type="button" id="resetBankButton">
												Erase
											</button>
											<button class="btn btn-warning" type="button" id="testBankButton">
												Test actions
											</button>

										</div>

										<div id="editbank_content">
										</div>


										<h4 style="margin-bottom:-13px;margin-top: 15px;">Key down/on actions</h4>
										<div id='bankActions'>
										</div>

										<select id='addBankAction' style='form-control'></select>

										<h4 style="margin-top: 30px;">Key up/off actions</h4>
										<div id='bankReleaseActions'>
										</div>

										<select id='addBankReleaseAction' style='form-control'></select>

										<h4 style="margin-top: 30px;">Instance feedback</h4>
										<div id='bankFeedbacks'>
										</div>
										<select id='addBankFeedback' style='form-control'></select>

										<br><br>
										<div id="oscTips">
										</div>

									</div>

									<div class="tab-pane" id="userconfig" role="tabpanel">
										<h4>User settings</h4>
										<p>Settings applies instantaneously, don't worry about it!</p>

										<table class='table'>
											<thead>
												<tr>
													<th>Setting</th>
													<th>Value</th>
												</tr>
											</thead>
											<tbody>


												<!-- flip page up/down -->
												<tr>
													<td>Flip counting direction on page up/down</td>
													<td>
														<div class="form-check form-check-inline mr-1">
															<input class="form-check-input" type="checkbox" id="userconfig_page_direction_flipped" value="1">
															<label class="form-check-label" for="userconfig_page_direction_flipped">Enabled</label>
														</div>
													</td>
												</tr>

												<tr>
													<td>Show + and - instead of arrows on page buttons</td>
													<td>
														<div class="form-check form-check-inline mr-1">
															<input class="form-check-input" type="checkbox" id="userconfig_page_plusminus" value="1">
															<label class="form-check-label" for="userconfig_page_plusminus">Enabled</label>
														</div>
													</td>
												</tr>



											</tbody>
										</table>


									</div>
								</div>
							</div>
							<!--/.col-->

							<div class='col-lg-6 col-sm-12 col-xs-12'>
								<ul class="nav nav-tabs" role="tablist">


									<li class="nav-item">
										<a class="nav-link active" data-toggle="tab" href="#log" role="tab" aria-controls="log">
											<i class="fa fa-clipboard-list"></i> Log
											<!-- <span class="badge badge-pill badge-success">OK</span> -->
										</a>
									</li>

									<li class="nav-item">
										<a class="nav-link" id="presets_tab" data-toggle="tab" href="#presets" role="tab" aria-controls="presets">
											<i class="fa fa-gift"></i> Presets
										</a>
									</li>

									<li class="nav-item">
										<a class="nav-link" id="import_tab" data-toggle="tab" href="#import" role="tab" aria-controls="import">
											<i class="fa fa-file-import"></i> Import / Export
										</a>
									</li>

								</ul>

								<div class="tab-content">
									<div class="tab-pane active" id="log" role="tabpanel">
									</div>

									<div class="tab-pane" id="presets" role="tabpanel">
									</div>

									<div class="tab-pane" id="import" role="tabpanel">


										<!-- this should be hidden after loading the file -->
										<div id="import_fileselect">
											<h4>Import configuration</h4>
											<p>Use the button below to browse your computer for a <b>.companionconfig</b> file containing either a full companion configuration, or just a single button page export.</p>
											<label class="btn btn-success btn-file"><i class="fa fa-file-import"></i> Import <input type="file" id="loadconfig" data-fieldid="importfile" style="display: none;"></label>

											<br><br>
										</div>

										<!-- this should be shown after loading the file -->
										<div id="import_config">
											<div class="row" id="import_pagenav">

												<div class="pagenav col-lg-4">
													<div id="import_btn_pagedown" class="btn btn-primary">
														<i class="fa fa-chevron-left"></i>
													</div>
												</div>

												<div class="pageat col-lg-4">
													<small>(Page 1)</small>
													<input id="import_page_title" placeholder="Page name" type="text" value="PAGE">
												</div>

												<div class="pagenav text-right col-lg-4">
													<div id="import_btn_pageup" class="btn btn-primary">
														<i class="fa fa-chevron-right"></i>
													</div>
												</div>

											</div>

											<div class="row" id='import_pagebank'>
											</div>
											<br>

											<div id="import_step2">
												<h5>What to do</h5>
												<button class="btn btn-primary import_individual">Import individual pages</button>
												<button class="btn btn-primary import_replace">Replace current configuration</button>
												<br><br>
											</div>

											<div id="import_resolve">

												<h5>Link config instances with local instances</h5>

												<table class="table table-responsive-sm">
													<thead>
														<tr>
															<th>Select instance</th>
															<th>Config instance type</th>
															<th>Config instance name</th>
														</tr>
													</thead>
													<tbody id="importConfigInstanceList">
														<tr>
															<td>
																<select>
																	<option>[ Create new instance ]</option>
																	<option>Our own BMD VideoHub instance</option>
																</select>
															</td>
															<td>BMD VideoHub</td>
															<td>Routeren da</td>
														</tr>
													</tbody>
												</table>

												<p>
													<button class="btn btn-warning" id="import_page">Import to page 1</button>
												</p>

											</div>


										</div>


										<h4>Export full configuration</h4>
										<p>Download a file containing all instances and button pages.</p>
										<a class="btn btn-success" id="download_export" href="/int/full_export">
											<span class="fa fa-download"></span> Export
										</a>
										<br><br>
										<h4>Reset full configuration</h4>
										<p>Remove all companion configuration. This will clear all instances and buttons and start over.</p>
										<button class="btn btn-danger" id="reset_all" type="button">
											<span class="fa fa-trash-alt"></span> Reset configuration
										</button>
										<br>


									</div>

								</div>

							</div>



						</div>
						<!--/.row-->
					</div>

				</div>
			</main>
		</div>
		<footer class="app-footer">
			<div>
				<a href="https://github.com/bitfocus/companion/issues">Event Companion</a>
				<span>by Bitfocus AS</span>
			</div>
			<div class="ml-auto">
				<a target="_new" href="https://bitfocus.io">bitfocus.io</a>
			</div>
		</footer>

		<!-- Device modal -->
		<div class="modal fade" id="deviceModal" tabindex="-1" role="dialog" aria-labelledby="deviceModalLabel" aria-hidden="true">
		  <div class="modal-dialog" role="document">
		    <div class="modal-content">
		      <div class="modal-header">
		        <h5 class="modal-title" id="deviceModalLabel">Device settings</h5>
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
		          <span aria-hidden="true">&times;</span>
		        </button>
		      </div>
		      <div class="modal-body">

		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
		      </div>
		    </div>
		  </div>
		</div>

		<!-- Bootstrap and necessary plugins-->
		<script src="js/jquery/jquery.min.js"></script>
		<script src="js/popper/popper.min.js"></script>
		<script src="js/bootstrap/bootstrap.min.js"></script>
		<script src="js/pace-progress/pace.min.js"></script>
		<script src="js/perfect-scrollbar/perfect-scrollbar.min.js"></script>
		<script src="js/coreui/coreui.min.js"></script>
		<script src="socket.io/socket.io.js"></script>
		<script src="js/moment/min/moment-with-locales.min.js"></script>
		<script src="js/touch-dnd.js"></script>
		<script src='js/spectrum.js'></script>
		<script src="js/preview.js"></script>
		<script src="page.js"></script>
		<script src="bank.js"></script>
		<script src="userconfig.js"></script>
		<script src="instance.js"></script>
		<script src="action.js"></script>
		<script src="import.js"></script>
		<script src="feedback.js"></script>
		<script src="release_action.js"></script>
		<script src="devices.js"></script>
		<script src="log.js"></script>
		<script src="main.js"></script>
		<script src="update.js"></script>
		<script src="preset.js"></script>
	</body>
</html>
